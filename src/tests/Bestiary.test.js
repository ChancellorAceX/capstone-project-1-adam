import React from 'react';
import { shallow } from 'enzyme';
import toJson from 'enzyme-to-json';
import Bestiary from '../components/Bestiary';

describe('Bestiary component', () => {
  const props = {
    bestiary: [{ "bid": 1, "monstername": "Aarakocra", "type": "Medium humanoid, neutral good", "ac": "12", "maxhp": "3d8", "speed": 20, "burrowspeed": null, "climbspeed": null, "flyspeed": 50, "swimspeed": null, "str": 10, "strmod": 0, "dex": 14, "dexmod": 2, "con": 10, "conmod": 0, "int": 11, "intmod": 0, "wis": 12, "wismod": 1, "cha": 11, "chamod": 0, "savingthrows": null, "skills": "Perception +5", "vulnerabilities": null, "resistances": null, "immunities": null, "senses": "passive Perception 15", "languages": "Auran", "cr": 0.25, "xp": 50, "extras": [["Dive Attack", "If the aarakocra if flying and dives at least 30 ft straight toward a target and then hits it with a melee weapon attack, the attack deals an extra (1d6) damage to the target."]], "actions": [["Talon", "Melee Weapon Attack: +4 to hit, reach 5 ft., one target. Hit:(1d4+2) slashing damage"]] }, { "bid": 2, "monstername": "Aboleth", "type": "Large aberration, lawful evil", "ac": "17 (natural armor)", "maxhp": "18d10 + 36", "speed": 10, "burrowspeed": null, "climbspeed": null, "flyspeed": null, "swimspeed": 40, "str": 21, "strmod": 5, "dex": 9, "dexmod": -1, "con": 15, "conmod": 2, "int": 18, "intmod": 4, "wis": 15, "wismod": 2, "cha": 18, "chamod": 4, "savingthrows": "Con +6, Int +8, Wis +6", "skills": "History +12, Perception +10", "vulnerabilities": null, "resistances": null, "immunities": null, "senses": "Darkvision 120ft, passive Perception 20", "languages": "Deep Speech, telepathy 120 ft.", "cr": 10, "xp": 5900, "extras": [["Amphibious", "The aboleth can breathe air and water"], ["Mucous Cloud", "While underwater, the aboleth is surrounded by ransformative mucus. A creature that touches the aboleth or that hits it with a melee attack while within 5 feet of it must make a DC 14 Constitution saving throw. On a failure, the creature is deseased for (1d4) hours. The diseased creature can breath only underwater"], ["Probing Telepathy", "If a creature communicates telepathically with the aboleth, the aboleth learns the creature's greatest desires if the aboleth can see the creature."]], "actions": [["Multiattack", "The aboleth makes three tentacle attacks."], ["Tentacle", "Melee Weapon Attack: +9 to hit, reach 10 ft., one target. Hit: (2d6+5) bludgeoning damage. If the target is a creature, it must succeed on a DC 14 Constitution saving throw or become diseased. The disease has no effect for 1 minute and can be removed by any magic that cures disease. After 1 minute, the diseased creature's skin becomes translucent and slimy, the creature can't regain hit points unless it is underwater, and the disease can be removed only by heal or another di sease-curing spell of 6th level or higher. When the creature is outside a body of water, it takes (1d12) acid damage every 10 minutes unless moisture is applied to the skin before 10 minutes have passed."], ["Tail", "Melee Weapon Attack: +9 to hit, reach 10 ft. one target. Hit: (3d6 + 5) bludgeoning damage."], ["Enslave (3/Day)", "The aboleth targets one creature it can see within 3 feet of it. The target must succeed on a DC 14 Wisdom saving throw or be magically charmed by the aboleth until the abolthe dies or until it is on a different plane of existence from the target. The charmed target is under the aboleth's control and can't take reactions, and the aboleth and the target can communicate telepathically with each other over any distance"], ["Legendary Actions", "The aboleth can take 3 legendary actions, choosing from the options below. Only one legendary action option can be used at a time and only at the end of another creature's turn . The aboleth regains spent legendary actions at the start of its turn. --Detect: The aboleth makes a Wisdom (Perception) check. --Tail Swipe: The aboleth makes one tail attack. --Psychic Drain (Costs 2 Actions): One creature charmed by the aboleth takes (3d6) psychic damage, and the aboleth regains hit points equal to the damage the creature takes."]] }, { "bid": 6, "monstername": "Animated Armor", "type": "Medium construct, unaligned", "ac": "18 (natural armor)", "maxhp": "6d8 + 6", "speed": 25, "burrowspeed": null, "climbspeed": null, "flyspeed": null, "swimspeed": null, "str": 14, "strmod": 2, "dex": 11, "dexmod": 0, "con": 13, "conmod": 1, "int": 1, "intmod": -5, "wis": 3, "wismod": -4, "cha": 1, "chamod": -5, "savingthrows": null, "skills": null, "vulnerabilities": null, "resistances": null, "immunities": "poison, psychic, blinded, charmed deafened, exhaustion, frightened, paralyzed, petrified, poisoned", "senses": "Blindsight 60 ft. (blind beyond this radius), passive Perception 6", "languages": "None", "cr": 1, "xp": 200, "extras": [["Antimagic Susceptibility", "The armor is incapacitated while in the area of an antimagic field. If targeted by dispel magic, the armor must succeed on a Constitution saving throw against the caster's spell save DC or fall unconscious for 1 minute."], ["False Appearance", "While the armor remains motionless, it is indistinguishable from a normal suit of armor"], ["Constructed Nature", "An animated object doesn't require air, food, drink, or sleep"]], "actions": [["Multiattack", "The armor makes two melee attacks"], ["Slam", "Melee Weapon Attack: +4 to hit, reach 5ft., one target. Hit (1d6 + 2) bludgeoning damage"]] }, { "bid": 9, "monstername": "Ankheg", "type": "Large monstrosity, unaligned", "ac": "14 (natural armor), 11 while prone", "maxhp": "6d10 + 6", "speed": 30, "burrowspeed": 10, "climbspeed": null, "flyspeed": null, "swimspeed": null, "str": 17, "strmod": 3, "dex": 11, "dexmod": 0, "con": 13, "conmod": 1, "int": 1, "intmod": -5, "wis": 13, "wismod": 1, "cha": 6, "chamod": 2, "savingthrows": null, "skills": null, "vulnerabilities": null, "resistances": null, "immunities": null, "senses": "Darkvision 60 ft., tremorsense 60 ft., passive Perception 11", "languages": "None", "cr": 2, "xp": 450, "extras": null, "actions": [["Bite", "Melee Weapon Attack: +5 to hit, reach 5 ft., one target. Hit: (2d6 + 3) slashing damage plus (1d6) acid damage. If the target is a Large or smaller creature, it is grappled (escape DC 13). Until this grapple ends, the ankheg can bite only the grappled creature and has advantage on attack rolls to do so."], ["Acid Spray (Recharge 6)", "The ankheg spits acid in a line that is 30 feet long and 5 feet wide, provided taht it has no creature grappled. Each creature in that line must make a DC 13 Dexterity saving throw, taking (3d6) acid damage on a failed save, or half as much damage on a successful one."]] }, { "bid": 10, "monstername": "Azer", "type": "Medium elemental, lawful neutral", "ac": "17 (natural armor, shield)", "maxhp": "6d8 + 12", "speed": 30, "burrowspeed": null, "climbspeed": null, "flyspeed": null, "swimspeed": null, "str": 17, "strmod": 3, "dex": 12, "dexmod": 1, "con": 15, "conmod": 2, "int": 12, "intmod": 1, "wis": 13, "wismod": 1, "cha": 10, "chamod": 0, "savingthrows": "Con +4", "skills": null, "vulnerabilities": null, "resistances": null, "immunities": "fire, poison, poisoned", "senses": "passive Perception 11", "languages": "Ignan", "cr": 2, "xp": 450, "extras": [["Heated Body", "A creature that touches the azer or hits it with a melee attack while within 5 feet of it takes (1d10) fire damage."], ["Heated Weapons", "When the azer hits with a metal melee weapon, it deals an extra (1d6) fire damage (included in the attack)."], ["Illumination", "The azer sheds bright light in a 10-foot radius and dim light for an additional 10 feet."], ["Living Fire", "An azer doesn't require food, drink, or sleep."]], "actions": [["Warhammer", "Melee Weapon Attack: +5 to hit, reach 5 ft., one target. Hit: (1d8 + 3) bludgeoning damage, or (1d10 + 3) bludgeoning damage if used with two hands to make a melee attack, plus (1d6) fire damage."]] }, { "bid": 3, "monstername": "Deva", "type": "Medium celestial, lawful good", "ac": "17 (natural armor)", "maxhp": "16d8 + 64", "speed": 30, "burrowspeed": null, "climbspeed": null, "flyspeed": 90, "swimspeed": null, "str": 18, "strmod": 4, "dex": 18, "dexmod": 4, "con": 18, "conmod": 4, "int": 17, "intmod": 3, "wis": 20, "wismod": 5, "cha": 20, "chamod": 5, "savingthrows": "Wis +9, Cha +9", "skills": "Insight +7, Perception +9", "vulnerabilities": null, "resistances": "radiant; bludgeoning, piercing, and slashing from nonmagical weapons", "immunities": "charmed, exhaustion, frightened", "senses": "darkvision 120 ft., passive Perception 19", "languages": "all, telepathy 120 ft", "cr": 10, "xp": 5900, "extras": [["Angelic Weapons", "The deva's weapon attacks are magical. When the deva hits with any weapon, the weapon deals an extra (4d8) radiant damage (included in the attack)"], ["Innate Spellcasting", "The deva's spellcasting ability is Charisma (spell save DC 17). The deva can innately cast the following spells, requiring only verbal components: At will:"], ["Magic Resistance", "The deva has advantage on saving throws against spells and other magical effects."]], "actions": [["Multiattack", "The deva makes two melee attacks."], ["Mace", "Melee Weapon Attack: +8 to hit, reach 5 ft., one target. Hit: (1d6 + 4) bludgeoning damage plus (4d8) radiant damage."], ["Healing Touch (3/Day)", "The deva touches another creature. The target magically regains (4d8 + 2) hit points and is freed from any curse, disease, poison, blindness, or deafness."], ["Change Shape", "The deva magically polymorphs into a humanoid or beast that has a challenge rating equal to or less than its own, or back into its true form. It reverts to its true form if it dies. Any equipment it is wearing or carrying is absorbed or borne by the new form (the deva's choice). In a new form, the deva retains its game statistics and ability to speak, but its AC, movement modes, Strength, Dexterity, and special senses are replaced by those of the new form, and it gains any statistics and capabilities (except class features, legendary actions, and lair actions) that the new form has but that it lacks."]] }, { "bid": 7, "monstername": "Flying Sword", "type": "Small construct, unaligned", "ac": "17 (natural armor)", "maxhp": "5d6", "speed": 0, "burrowspeed": null, "climbspeed": null, "flyspeed": 50, "swimspeed": null, "str": 12, "strmod": 1, "dex": 15, "dexmod": 2, "con": 11, "conmod": 0, "int": 1, "intmod": -5, "wis": 5, "wismod": -3, "cha": 1, "chamod": -5, "savingthrows": "Dex +4", "skills": null, "vulnerabilities": null, "resistances": null, "immunities": "poison, psychic, blinded, charmed, deafened, frightened, paralyzed, petrified, poisoned", "senses": "Blindsight 60 ft. (blind beyond this radius)", "languages": "None", "cr": 0.25, "xp": 50, "extras": [["Antimagic Susceptibility", "The sword is incapacitated while in the area of an antimagic field. If targeted by dispel magic, the sword must succeed on a Constitution saving throw against the caster's spell save DC or fall unconscious for 1 minute."], ["False Appearance", "While the sword remains motionless and isn't flying, it is indistinguishable from a normal sword."], ["Constructed Nature", "An animated object doesn't require air, food, drink, or sleep"]], "actions": [["Longsword", "Melee Weapon Attack: +3 to hit, reach 5ft., one target. Hit: (1d8 + 1) slashing damage."]] }, { "bid": 4, "monstername": "Planetar", "type": "Large celestial, lawful good", "ac": "19 (natural armor)", "maxhp": "16d10 + 112", "speed": 40, "burrowspeed": null, "climbspeed": null, "flyspeed": 120, "swimspeed": null, "str": 24, "strmod": 7, "dex": 20, "dexmod": 5, "con": 24, "conmod": 7, "int": 19, "intmod": 4, "wis": 22, "wismod": 6, "cha": 25, "chamod": 7, "savingthrows": "Con +12, Wis +11, Cha+12", "skills": "Perception +11", "vulnerabilities": null, "resistances": "radiant; bludgeoning, piercing, and slashing from non-magical weapons", "immunities": "charmed, exhaustion, frightened", "senses": "Truesight 120 ft., passive Perception 21", "languages": "all, telepathy 120 ft.", "cr": 16, "xp": 15000, "extras": [["Angelic Weapons", "The planetar's weapon attacks are magical. When the planetar hits with any weapon, the weapon deals an extra (5d8) radiant damage (included in the attack)."], ["Divine Awareness", "The planetar knows if it hears a lie"], ["Innate Spellcasting", "The planetar's spellcasting ability is Charisma (spell save DC 20). The planetar can innately cast the following spells, requiring no material components: --At will: detect evil and good, invisibility (self only) --3/day each: blade barrier, dispel evil and good, flame strike, raise dead --1/day each: commune, control weather, insect plague"], ["Magic Resistance", "The planetar has advantage on saving throws against spells and other magical effects."]], "actions": [["Multiattack", "The planetar makes two melee attacks"], ["Greatsword", "Melee Weapon Attack: +12 to hit, reach 5 ft., one target. Hit: (4d6 + 7) slashing damage plus (5d8) radiant damage"], ["Healing Touch (4/Day)", "The planetar touches another creature. The target magically regains (6d8 + 3) hit points and is freed from any curse, disease, poison, blindness, or deafness"]] }, { "bid": 8, "monstername": "Rug of Smothering", "type": "Large construct, unaligned", "ac": "12", "maxhp": "6d10", "speed": 10, "burrowspeed": null, "climbspeed": null, "flyspeed": null, "swimspeed": null, "str": 17, "strmod": 3, "dex": 14, "dexmod": 2, "con": 10, "conmod": 0, "int": 1, "intmod": -5, "wis": 3, "wismod": -4, "cha": 1, "chamod": -5, "savingthrows": null, "skills": null, "vulnerabilities": null, "resistances": null, "immunities": "poison, psychic, blinded, charmed, deafened, frightened, paralyzed, petrified, poisoned", "senses": "Blindsight 60 ft. (blind beyond this radius)", "languages": "None", "cr": 2, "xp": 450, "extras": [["Antimagic Susceptibility", "The sword is incapacitated while in the area of an antimagic field. If targeted by dispel magic, the sword must succeed on a Constitution saving throw against the caster's spell save DC or fall unconscious for 1 minute."], ["Damage Transfer", "While it is grappling a creature, the rug takes only half the damage dealt to it, and the creature grappled by the rug takes the other half."], ["False Appearance", "While the sword remains motionless and isn't flying, it is indistinguishable from a normal sword."], ["Constructed Nature", "An animated object doesn't require air, food, drink, or sleep"]], "actions": [["Smother", "Melee Weapon Attack: +5 to hit, reach 5 ft., one Medium or smaller creature. Hit: The creature is grappled (escape DC 13). Until this grapple ends, the target is restrained, blinded, and at risk of suffocating, and the rug can't smother another target. In addition, at the start of each of the target's turns, the target takes (2d6 + 3) bludgeoning damage."]] }, { "bid": 5, "monstername": "Solar", "type": "Large celestial, lawful good", "ac": "21 (natural armor)", "maxhp": "18d10 + 144", "speed": 50, "burrowspeed": null, "climbspeed": null, "flyspeed": 150, "swimspeed": null, "str": 26, "strmod": 8, "dex": 22, "dexmod": 6, "con": 26, "conmod": 8, "int": 25, "intmod": 7, "wis": 25, "wismod": 7, "cha": 30, "chamod": 10, "savingthrows": "Int +14, Wis +14, Cha +17", "skills": "Perception +14", "vulnerabilities": null, "resistances": "radiant; bludgeoning, piercing, and slashing from nonmagical weapons", "immunities": "necrotic, poison, charmed, exhaustion, frightened, poisoned", "senses": "Truesight 120 ft., passive Perception 24", "languages": "all, telepathy 120 ft.", "cr": 21, "xp": 33000, "extras": [["Angelic Weapons", "The solar's weapon attacks are magical. When the solar hits with any weapon, the weapon deals an extra (6d8) radiant damage (included in the attack)."], ["Divine Awareness", "The planetar knows if it hears a lie"], ["Innate Spellcasting", "The solar's spellcasting ability is Charisma (spell save DC 25). It can innately cast the following spells, requiring no material components: --At will: detect evil and good, invisibility (self only) --3/day each: blade barrier, dispel evil and good, resurrection --1/day each: commune, control weather"], ["Magic Resistance", "The solar has advantage on saving throws against spells and other magical effects."]], "actions": [["Multiattack", "The solar makes two greatsword attacks"], ["Greatsword", "Melee Weapon Attack: +15 to hit, reach 5 ft., one target. Hit: (4d6 + 8) slashing damage plus (6d8) radiant damage"], ["Slaying Longbow", "Ranged Weapon Attack: +13 to hit, range 120/600 ft., one target. Hit: (2d8 + 6) piercing damage plus (6d8) radiant damage. If the target is a creature that has 100 hit points or fewer, it must succeed on a DC 15 Constitution saving throw or die"], ["Flying Sword", "The solar releases its greatsword to hover magically in an unoccupied space within 5 feet of it. if the solar can see the sword, the solar can mentally command it as a bonus action to fly up to 50 feet and either make one attack against a target or return to the solar's hands. If the hovering sword is targeted by any effect, the solar is considered to be holding it. The hovering sword falls if the solar dies."], ["Healing Touch (4/Day)", "The solar touches another creature. The target magically regains (8d8 + 4) hit points and is freed from any curse, disease, poison, blindness, or deafness"], ["Legendary Actions", "The solar can take 3 legendary actions, choosing from the options below. Only one legendary action option can be used at a time and only at the end of another creature's turn. The solar regains spent legendary actions at the start of its turn. --Teleport: The solar magically teleports, along with any equipment it is wearing or carrying, up to 120 feet to an unoccupied space it can see. --Searing Burst (Costs 2 Actions): The solar emits magical, divine energy. Each creature of its choice in a 10 -foot radius must make a DC 23 Dexterity saving throw, taking (4d6) fire damage plus (4d6) radiant damage on a fai led save, or half as much damage on a successful one. --Blinding Gaze (Costs 3 Actions): The solar targets one creature it can see within 30 feet of it. If the target can see it, the target must succeed on a DC 15 Constitution saving throw or be blinded until magic such as the lesser restoration spell removes the blindness."]] }],
    nameSearch: '',
    typeSearch: '',
    crSearch: 50
  };
  it('renders the full bestiary page', () => {
    const wrapper = shallow(<Bestiary {...props} />);
    expect(toJson(wrapper)).toMatchSnapshot();
  });
});